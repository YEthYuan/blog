<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Ye Yuan's Blog - Software Development Engineer, Backend, Fullstack, Cloud Natives, Edge Computing</title><meta name="author" content="Ye Yuan"><meta name="copyright" content="Ye Yuan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="A record of learnings in CS">
<meta property="og:type" content="website">
<meta property="og:title" content="Ye Yuan&#39;s Blog">
<meta property="og:url" content="https://blog.yeyuan.pro/index.html">
<meta property="og:site_name" content="Ye Yuan&#39;s Blog">
<meta property="og:description" content="A record of learnings in CS">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://blog.yeyuan.pro/img/avatar.jpg">
<meta property="article:author" content="Ye Yuan">
<meta property="article:tag" content="Ye Yuan, HUST, UCSB, Huazhong University of Science and Technology, University of California Santa Barbara, SDE, Software Development Engineer">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.yeyuan.pro/img/avatar.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://blog.yeyuan.pro/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-KTYXD67M5V"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-KTYXD67M5V');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":50,"languages":{"author":"Author: Ye Yuan","link":"Link: ","source":"Source: Ye Yuan's Blog","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Ye Yuan\'s Blog',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-04-16 05:55:03'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.1.0"><link rel="alternate" href="/atom.xml" title="Ye Yuan's Blog" type="application/atom+xml">
</head><body><link rel="stylesheet" href="/css/custom/center-radar.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">14</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">9</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://yeyuan.pro/#about"><i class="fa-fw fa-solid fa-user"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/img/topimg.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Ye Yuan's Blog</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://yeyuan.pro/#about"><i class="fa-fw fa-solid fa-user"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Ye Yuan's Blog</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="/" target="_blank" title="Home"><i class="fa-solid fa-house-chimney"></i></a><a class="social-icon" href="https://yeyuan.pro/" target="_blank" title="About me"><i class="fa-solid fa-user"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa-solid fa-square-rss"></i></a><a class="social-icon" href="mailto:maxwell.yuanyeh@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://scholar.google.com/citations?hl=en&amp;user=HjmRtpQAAAAJ" target="_blank" title="Google Scholar"><i class="fa-solid fa-graduation-cap"></i></a><a class="social-icon" href="https://www.linkedin.com/in/yethyuan" target="_blank" title="LinkedIn"><i class="fa-brands fa-linkedin"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/posts/2023/fen-bu-shi-shi-wu-2pc-yu-3pc.html" title="分布式事务 - 2PC与3PC"><img class="post_bg" src="https://picsum.photos/1920/1080?blur=2&amp;random=6" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="分布式事务 - 2PC与3PC"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/2023/fen-bu-shi-shi-wu-2pc-yu-3pc.html" title="分布式事务 - 2PC与3PC">分布式事务 - 2PC与3PC</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-04-15T22:40:45.000Z" title="Created 2023-04-15 22:40:45">2023-04-15</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/System/">System</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/CN/">CN</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/">知识整理</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Distributed-System/">Distributed System</a></span></div><div class="content">分布式事务 之 2PC与3PC理论基础两阶段提交（2PC）两阶段提交又称2PC,2PC是一个非常经典的强一致、中心化的原子提交协议。
这里所说的中心化是指协议中有两类节点：一个是中心化协调者节点（coordinator）和N个参与者节点（partcipant）。
两个阶段：第一阶段：投票阶段 和第二阶段：提交/执行阶段。
第一阶段：投票阶段
第一阶段主要分为3步

事务询问

协调者 向所有的 参与者 发送事务预处理请求，称之为Prepare，并开始等待各 参与者 的响应。

执行本地事务

各个 参与者 节点执行本地事务操作,但在执行完成后并不会真正提交数据库本地事务，而是先向 协调者 报告说：“我这边可以处理了/我这边不能处理”。.

各参与者向协调者反馈事务询问的响应

如果 参与者 成功执行了事务操作,那么就反馈给协调者 Yes 响应,表示事务可以执行,如果没有 参与者 成功执行事务,那么就反馈给协调者 No 响应,表示事务不可以执行。
第一阶段执行完后，会有两种可能。1、所有都返回Yes. 2、有一个或者多个返回No。
第二阶段：提交/执行阶段（成功流程）
成功条件：所有参与 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/2023/raft-algorithm-optimization.html" title="Raft Algorithm Optimization"><img class="post_bg" src="https://picsum.photos/1920/1080?blur=2&amp;random=2" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Raft Algorithm Optimization"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/2023/raft-algorithm-optimization.html" title="Raft Algorithm Optimization">Raft Algorithm Optimization</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-04-14T15:45:04.000Z" title="Created 2023-04-14 15:45:04">2023-04-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Project/">Project</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/EN/">EN</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Project/">Project</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Algorithm/">Algorithm</a></span></div><div class="content"></div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/2022/cs291a-nosql.html" title="Non-Relational Data Stores (NoSQL)"><img class="post_bg" src="https://picsum.photos/1920/1080?blur=2&amp;random=10" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Non-Relational Data Stores (NoSQL)"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/2022/cs291a-nosql.html" title="Non-Relational Data Stores (NoSQL)">Non-Relational Data Stores (NoSQL)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-11-14T23:00:45.000Z" title="Created 2022-11-14 23:00:45">2022-11-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Database/">Database</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/EN/">EN</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/UCSB/">UCSB</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/CS291A/">CS291A</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Database/">Database</a></span></div><div class="content">MotivationApplication GrowthAs our application experiences greater and greater popularity, the data layer proves difficult to scale horizontally. Without a scaling path for our data layer, our growing data set and/or our usage of the database will become a bottleneck limiting our application.
Relational Databases are great tools for our data layer. Unfortunately, there is no simple way to spread load across multiple RDBMSes. We’ve looked at a few techniques for scaling RDBMSes:

Distinguishing R ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/2022/cs291a-tsung-load-testing.html" title="Load Testing With Tsung"><img class="post_bg" src="https://picsum.photos/1920/1080?blur=2&amp;random=2" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Load Testing With Tsung"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/2022/cs291a-tsung-load-testing.html" title="Load Testing With Tsung">Load Testing With Tsung</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-11-14T22:28:33.000Z" title="Created 2022-11-14 22:28:33">2022-11-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Tools/">Tools</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/EN/">EN</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/UCSB/">UCSB</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/CS291A/">CS291A</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Testing/">Testing</a></span></div><div class="content">What should we observe during load testing?
Response times
Error rates
Synthetic user success rate

We want to create load-test flows that resemble real traffic. There are a few things to consider:

Ensuring flows contain a mixture of reads and writes
Ensuring variance within the flows themselves (not all users have the same habits)
The test framework should be able to utilize data returned from prior requests (e.g., create a submission and make a comment on it)

Load Testing ToolsHigh Performan ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/2022/cs291a-rdbms-scaling-ii.html" title="Relational Database Management System (RDBMS) Scaling - II"><img class="post_bg" src="https://picsum.photos/1920/1080?blur=2&amp;random=9" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Relational Database Management System (RDBMS) Scaling - II"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/2022/cs291a-rdbms-scaling-ii.html" title="Relational Database Management System (RDBMS) Scaling - II">Relational Database Management System (RDBMS) Scaling - II</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-11-14T19:48:10.000Z" title="Created 2022-11-14 19:48:10">2022-11-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Database/">Database</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/EN/">EN</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/UCSB/">UCSB</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/CS291A/">CS291A</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Database/">Database</a></span></div><div class="content">Service Oriented Architecture (SOA) and MicroservicesService Oriented Architecture
Partitioning splits data of the same type into separate, unrelated groups.

Service Oriented Architectures (SOA) do something different. They partition both the data and the code based on type and function. Like with partitioning, no joins can automatically be performed across these partitions.


StackThe primary concept behind SOA is having many focused mini-applications (microservices). Each of these focused min ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/2022/cs291a-rdbms-scaling-i.html" title="Relational Database Management System (RDBMS) Scaling - I"><img class="post_bg" src="https://picsum.photos/1920/1080?blur=2&amp;random=1" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Relational Database Management System (RDBMS) Scaling - I"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/2022/cs291a-rdbms-scaling-i.html" title="Relational Database Management System (RDBMS) Scaling - I">Relational Database Management System (RDBMS) Scaling - I</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-11-14T17:48:10.000Z" title="Created 2022-11-14 17:48:10">2022-11-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Database/">Database</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/EN/">EN</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/UCSB/">UCSB</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/CS291A/">CS291A</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Database/">Database</a></span></div><div class="content">MotivationYou have your web application running on EC2. It is becoming increasingly popular and performance is degrading. What do you do?
Handling Concurrent RequestsYou have deployed application servers that can serve many concurrent requests. But as your site’s popularity continues to grow that is not sufficient.

Vertical Scaling
You have increased your instance sizes and handled more load. However, as the popularity continues to grow you are no longer able to continue scaling vertically.
Hor ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/2022/cs291a-concurrency-control-in-rails.html" title="Concurrency Control in Rails"><img class="post_bg" src="https://picsum.photos/1920/1080?blur=2&amp;random=3" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Concurrency Control in Rails"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/2022/cs291a-concurrency-control-in-rails.html" title="Concurrency Control in Rails">Concurrency Control in Rails</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-11-13T19:16:34.000Z" title="Created 2022-11-13 19:16:34">2022-11-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Ruby/">Ruby</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/EN/">EN</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/UCSB/">UCSB</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/CS291A/">CS291A</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/RoR/">RoR</a></span></div><div class="content">Scenario
We have many application servers running our application. We are using a relational database to ensure that each request observes a consistent view of the database.
Locks in railsRails uses two types of concurrency control

Optimistic Locking: Assume that database modifications are going to succeed. Throw an exception when they do not.
Pessimistic Locking: Ensure that database modifications will succeed by explicitly avoiding conflict.

Optimistic LockDefinitionAny ActiveRecord model wi ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/2022/cs291a-relational-databases-ii.html" title="Relational Databases - II"><img class="post_bg" src="https://picsum.photos/1920/1080?blur=2&amp;random=2" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Relational Databases - II"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/2022/cs291a-relational-databases-ii.html" title="Relational Databases - II">Relational Databases - II</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-11-13T16:54:43.000Z" title="Created 2022-11-13 16:54:43">2022-11-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Database/">Database</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/EN/">EN</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/UCSB/">UCSB</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/CS291A/">CS291A</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Database/">Database</a></span></div><div class="content">Relational Databases - IISchedule



T1
T2
T3




R(X)




W(X)




Commit





R(Y)




W(Y)




Commit





R(Z)




W(Z)




Commit




Describe the execution of transactionsthat run in a database
Schedule TypesA schedule is serial if

the transactions are executed non-interleaved

one transaction finishes before the next one starts


Two schedules are conflict equivalent if

they involve the same set of transactions

every pair of conflicting actions are ordered in the same way


A schedule  ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/2022/cs291a-relational-databases-i.html" title="Relational Databases - I"><img class="post_bg" src="https://picsum.photos/1920/1080?blur=2&amp;random=2" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Relational Databases - I"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/2022/cs291a-relational-databases-i.html" title="Relational Databases - I">Relational Databases - I</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2022-11-13T16:10:27.000Z" title="Created 2022-11-13 16:10:27">2022-11-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Database/">Database</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/EN/">EN</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/UCSB/">UCSB</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/CS291A/">CS291A</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Database/">Database</a></span></div><div class="content">Relational Databases - ISQL vs noSQLRelational (SQL)Examples: 

MySQL (MariaDB, Percona)
PostgreSQL
Oracle
MS SQL

Features: 

are a general-purpose persistence layer
offer more features
have a limited ability to scale horizontally

Non-relational (NoSQL)Examples: 

Cassandra
MongoDB
Redis

Features: 

often are more specialized
require more from the application layer
are better at scaling horizontally


If your needs fit within an RDBMS’s (relational database management system) ability to scale ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/posts/2021/ji-suan-ji-wang-luo-wu-ceng-xie-yi-zheng-li.html" title="TCP/IP五层协议整理"><img class="post_bg" src="https://picsum.photos/1920/1080?blur=2&amp;random=10" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TCP/IP五层协议整理"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/2021/ji-suan-ji-wang-luo-wu-ceng-xie-yi-zheng-li.html" title="TCP/IP五层协议整理">TCP/IP五层协议整理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2021-12-28T20:19:32.000Z" title="Created 2021-12-28 20:19:32">2021-12-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Computer-Network/">Computer Network</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/CN/">CN</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/">知识整理</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span></div><div class="content">TCP/IP五层协议整理




层次名称
协议举例
协议分组名称
主要功能




应用层
HTTP/SMTP/FTP/DNS/RIP/BGP
报文
直接为用户的应用进程提供服务


运输层
TCP/UDP
报文段(TCP), 数据报(UDP)
两个主机中进程间通信/复用和分用/差错检测


网络层
IP/ICMP/OSPF
数据报
两个主机间通信(转发)，路由选路功能(选路)


链路层
以太网/PPP/IEEE 802.1Q/802.3
帧
物理链路上两个相邻节点通信/差错检测纠正


物理层
10BASE-T/10BASE2/10BASE5
比特流
透明地传送比特流




</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Ye Yuan</div><div class="author-info__description">A record of learnings in CS</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">14</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/YEthYuan"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="/" target="_blank" title="Home"><i class="fa-solid fa-house-chimney"></i></a><a class="social-icon" href="https://yeyuan.pro/" target="_blank" title="About me"><i class="fa-solid fa-user"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa-solid fa-square-rss"></i></a><a class="social-icon" href="mailto:maxwell.yuanyeh@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://scholar.google.com/citations?hl=en&amp;user=HjmRtpQAAAAJ" target="_blank" title="Google Scholar"><i class="fa-solid fa-graduation-cap"></i></a><a class="social-icon" href="https://www.linkedin.com/in/yethyuan" target="_blank" title="LinkedIn"><i class="fa-brands fa-linkedin"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">I'm actively looking for Summer 2023 Software Development Engineer Intern opportunities! Feel free to contact me at hire@yeyuan.pro</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/2023/fen-bu-shi-shi-wu-2pc-yu-3pc.html" title="分布式事务 - 2PC与3PC"><img src="https://picsum.photos/1920/1080?blur=2&amp;random=6" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="分布式事务 - 2PC与3PC"/></a><div class="content"><a class="title" href="/posts/2023/fen-bu-shi-shi-wu-2pc-yu-3pc.html" title="分布式事务 - 2PC与3PC">分布式事务 - 2PC与3PC</a><time datetime="2023-04-15T22:40:45.000Z" title="Created 2023-04-15 22:40:45">2023-04-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/2023/raft-algorithm-optimization.html" title="Raft Algorithm Optimization"><img src="https://picsum.photos/1920/1080?blur=2&amp;random=2" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Raft Algorithm Optimization"/></a><div class="content"><a class="title" href="/posts/2023/raft-algorithm-optimization.html" title="Raft Algorithm Optimization">Raft Algorithm Optimization</a><time datetime="2023-04-14T15:45:04.000Z" title="Created 2023-04-14 15:45:04">2023-04-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/2022/cs291a-nosql.html" title="Non-Relational Data Stores (NoSQL)"><img src="https://picsum.photos/1920/1080?blur=2&amp;random=10" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Non-Relational Data Stores (NoSQL)"/></a><div class="content"><a class="title" href="/posts/2022/cs291a-nosql.html" title="Non-Relational Data Stores (NoSQL)">Non-Relational Data Stores (NoSQL)</a><time datetime="2022-11-14T23:00:45.000Z" title="Created 2022-11-14 23:00:45">2022-11-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/2022/cs291a-tsung-load-testing.html" title="Load Testing With Tsung"><img src="https://picsum.photos/1920/1080?blur=2&amp;random=2" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Load Testing With Tsung"/></a><div class="content"><a class="title" href="/posts/2022/cs291a-tsung-load-testing.html" title="Load Testing With Tsung">Load Testing With Tsung</a><time datetime="2022-11-14T22:28:33.000Z" title="Created 2022-11-14 22:28:33">2022-11-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/2022/cs291a-rdbms-scaling-ii.html" title="Relational Database Management System (RDBMS) Scaling - II"><img src="https://picsum.photos/1920/1080?blur=2&amp;random=9" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Relational Database Management System (RDBMS) Scaling - II"/></a><div class="content"><a class="title" href="/posts/2022/cs291a-rdbms-scaling-ii.html" title="Relational Database Management System (RDBMS) Scaling - II">Relational Database Management System (RDBMS) Scaling - II</a><time datetime="2022-11-14T19:48:10.000Z" title="Created 2022-11-14 19:48:10">2022-11-14</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            <a class="card-more-btn" href="/categories/" title="More">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Algorithm/"><span class="card-category-list-name">Algorithm</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Compiler/"><span class="card-category-list-name">Compiler</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Computer-Network/"><span class="card-category-list-name">Computer Network</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Database/"><span class="card-category-list-name">Database</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Misc/"><span class="card-category-list-name">Misc</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Project/"><span class="card-category-list-name">Project</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Ruby/"><span class="card-category-list-name">Ruby</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/System/"><span class="card-category-list-name">System</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/Algorithm/" style="font-size: 1.1em; color: #999">Algorithm</a> <a href="/tags/C/" style="font-size: 1.1em; color: #999">C++</a> <a href="/tags/CN/" style="font-size: 1.3em; color: #99a1ac">CN</a> <a href="/tags/CS291A/" style="font-size: 1.4em; color: #99a5b6">CS291A</a> <a href="/tags/Database/" style="font-size: 1.3em; color: #99a1ac">Database</a> <a href="/tags/Distributed-System/" style="font-size: 1.1em; color: #999">Distributed System</a> <a href="/tags/EN/" style="font-size: 1.5em; color: #99a9bf">EN</a> <a href="/tags/Help/" style="font-size: 1.1em; color: #999">Help</a> <a href="/tags/Project/" style="font-size: 1.1em; color: #999">Project</a> <a href="/tags/RoR/" style="font-size: 1.1em; color: #999">RoR</a> <a href="/tags/Testing/" style="font-size: 1.1em; color: #999">Testing</a> <a href="/tags/UCSB/" style="font-size: 1.4em; color: #99a5b6">UCSB</a> <a href="/tags/%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/" style="font-size: 1.3em; color: #99a1ac">知识整理</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.2em; color: #999da3">算法</a> <a href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" style="font-size: 1.1em; color: #999">编译原理</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 1.1em; color: #999">计算机网络</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">April 2023</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">November 2022</span><span class="card-archive-list-count">7</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/12/"><span class="card-archive-list-date">December 2021</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/10/"><span class="card-archive-list-date">October 2020</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">14</div></div><div class="webinfo-item"><div class="item-name">Total Count :</div><div class="item-count">16.5k</div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-04-16T05:55:02.983Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/topimg.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Ye Yuan</div><div class="footer_custom_text">Make the world a better place</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>function subtitleType () {
  if (true) { 
    window.typed = new Typed("#subtitle", {
      strings: ["Crescat scientia vita excolatur","Sidere mens eadem mutato","繁星纵变，智慧永恒","Rerum cognoscere causas","Hinc itur ad astra","我们从这里走向繁星","Lux sit","Suos cultores scientia coronat","Scientia vincere tenebras","Concordia cum veritate","Vacate et scire","慎思博学"],
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50
    })
  } else {
    document.getElementById("subtitle").innerHTML = 'Crescat scientia vita excolatur'
  }
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":false,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"log":false});</script></body></html>